var sprintf=require("underscore.string/sprintf"),_=require("underscore");(function(){var root=this,MoneyStack=function(initial){this.config={precision:2,currencyFormat:"$%.2f"},this.stored=0,initial&&this.set(initial)};MoneyStack.prototype.set=function(value){"string"==typeof value&&(value=value.replace(/[^\d.]/g,""),value=parseFloat(value)),this.stored=this.__upscaleValue(value,this.config.precision)},MoneyStack.prototype.get=function(){return this.__downscaleValue(this.stored,this.config.precision)},MoneyStack.prototype.readable=function(){return sprintf(this.config.currencyFormat,this.get())},MoneyStack.prototype.plus=function(otherStack){if(!otherStack)return this;if(!_.isEqual(this.config,otherStack.config))throw{name:"Mismatched config",message:"The configs do not match"};var newStack=new MoneyStack;return newStack.stored=this.stored+otherStack.stored,newStack.config=this.config,newStack},MoneyStack.prototype.subtract=function(otherStack){if(!otherStack)return this;if(!_.isEqual(this.config,otherStack.config))throw{name:"Mismatched config",message:"The configs do not match"};var newStack=new MoneyStack;return newStack.stored=this.stored-otherStack.stored,newStack.config=this.config,newStack},MoneyStack.prototype.__upscaleValue=function(value,precision){var adjusted=value*this.__determineScale(precision);return this.__capToInterger(adjusted)},MoneyStack.prototype.__downscaleValue=function(value,precision){var adjusted=value/this.__determineScale(precision);return this.__truncateValue(adjusted,precision)},MoneyStack.prototype.__determineScale=function(precision){return Math.pow(10,precision)},MoneyStack.prototype.__truncateValue=function(value,precision){var scale=this.__determineScale(precision);return this.__capToInterger(value*scale)/scale},MoneyStack.prototype.__capToInterger=function(value){return value>0?Math.floor(value):Math.ceil(value)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=MoneyStack),exports.MoneyStack=MoneyStack):root.MoneyStack=MoneyStack}).call(this);
//# sourceMappingURL=moneystack-min.map